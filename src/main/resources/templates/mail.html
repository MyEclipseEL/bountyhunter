<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:th="http://www.thymeleaf.org">
<head>
<title>Mail Us</title>
<!-- for-mobile-apps -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="Best Store Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template, 
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false);
		function hideURLbar(){ window.scrollTo(0,1); } </script>
<!-- //for-mobile-apps -->
<link href="../css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
<link href="../css/style.css" rel="stylesheet" type="text/css" media="all" />
<!-- js -->
<script src="../js/jquery.min.js"></script>
<!-- //js -->
<!-- cart -->
	<script src="../js/simpleCart.min.js"> </script>
<!-- cart -->
<link rel="stylesheet" type="text/css" href="../css/jquery-ui.css">

<!-- for bootstrap working -->
	<script type="text/javascript" src="../js/bootstrap-3.1.1.min.js"></script>
<!-- //for bootstrap working -->
<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic,800,800italic' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Lato:400,100,100italic,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
<!-- animation-effect -->
<link href="../css/animate.min.css" rel="stylesheet"> 
<!--<script src="../js/wow.min.js"></script>-->
<script src="../js/jquery-ui.min.js"></script>
<script src="../js/jquery.min.js"></script>
<script src="../js/jquery-3.2.1.min.js"></script>
<!-- //animation-effect -->
	<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js"></script>


</head>
<script>
    function logoff(){
        $.ajax({
            type:'POST',
            dataType: "json",
            url:"../user/logoff",
			/* data:{
			 email:$("#email").val(),
			 password:$("#password").val()
			 },*/
            success:function(data){
                alert("注销完成");
                window.location.href="/index";

            },
            error:function(){
//            $("#test").html("发生错误:"+jqXHR.status);
                alert("发生错误");
            }
        });
    }
</script>
	
<body>
<!-- header -->
<div class="header">
	<div class="container">
		<div class="header-grid">
			<div class="header-grid-left animated wow slideInLeft" data-wow-delay=".5s">
			</div>
			<div class="header-grid-right animated wow slideInRight" data-wow-delay=".2s">
				<ul class="social-icons" th:if="${session.userAccount == null}">
					<!--<li><a href="#" class="facebook"></a></li>-->
					<li><a href="#" class="twitter"></a></li>
					<i class="glyphicon " aria-hidden="true"></i>
					<a href="../login">登录/</a><a href="../register-01">免费注册</a>
					<li class="glyphicon " aria-hidden="true">

					</li>
				</ul>
				<ul th:if="${session.userAccount != null}">
					<i>
						<a href="../assignment/history"><img style="width: 50px;height: 50px;" class="img-circle" th:src="${session.userAccount.icon}" alt="头像"/></a>
						<i><a href="#" th:text="${session.userAccount.userName}" style="font-size: larger"></a></i>
						<i><a href="javascript:void(0)" onclick="logoff()">注销</a></i>
					</i>
				</ul>
			</div>
			<div class="clearfix"> </div>
		</div>
		<div class="logo-nav">
			<div class="logo-nav-left animated wow zoomIn slideInLeft " data-wow-delay=".5s" >
				<h1 ><a href="../index">赏 金 猎 人</a></h1>
				<span>中小型校园任务发布平台</span>
			</div>
			<div class="logo-nav-left1">
				<nav class="navbar navbar-default">
					<!-- Brand and toggle get grouped for better mobile display -->
					<div class="navbar-header nav_2">
						<button type="button" class="navbar-toggle collapsed navbar-toggle1" data-toggle="collapse" data-target="#bs-megadropdown-tabs">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
					</div>
					<div class="collapse navbar-collapse" id="bs-megadropdown-tabs">
						<ul class="nav navbar-nav">
							<li class="active"><a href="../index" >首页</a></li>
							<!-- Mega Menu -->
							<li class="dropdown ">

								<a href="../products.html" class="dropdown-toggle " data-toggle="dropdown">悬赏任务分类 <b class="caret"></b></a>
								<ul class="dropdown-menu multi-column columns-1">
									<div class="row"  >
										<div class="col-sm-8"  >
											<ul class="multi-column-dropdown" style="padding-left: 40px;" th:each="c : ${category}">
												<!--<h6>分类列表</h6>-->
												<li><a th:href="@{'../assignment/list?categoryType='+${c.categoryType} }" th:text="${c.categoryName}">招聘兼职</a></li>

											</ul>
										</div>


										<div class="clearfix"></div>
									</div>
								</ul>
							</li>
							<li  ><a href="../assignment/list?categoryType=102" >悬赏物品</a></li>
							<li  ><a href="../category/news" >最新任务列表</a></li>
							<li class="active"><a href="../category/mail" style="color:#dd703e">任务发布</a></li>
							<!--<li><a href="../category/check">历史任务</a></li>-->
							<li><a href="../assignment/history">个人中心</a></li>


						</ul>
					</div>
				</nav>
			</div>

			<div class="clearfix"> </div>
		</div>
	</div>
</div>
<!-- //header -->
<!-- breadcrumbs -->
	<div class="breadcrumbs">
		<div class="container">
			<ol class="breadcrumb breadcrumb1 animated wow slideInLeft" data-wow-delay=".5s">
				<li><a href="../index"><span class="glyphicon glyphicon-home" aria-hidden="true"></span>首页</a></li>
				<li class="active">发布任务</li>
			</ol>
		</div>
	</div>
<!-- //breadcrumbs -->
<!-- mail -->

	<div class="mail animated wow zoomIn" data-wow-delay=".5s">

		<div class="container"  id="box">
			<h3>发布任务</h3>

				<div class="col-md-12 mail-grid-left animated wow slideInLeft" data-wow-delay=".5s" >
					<form id="form-add" method="get" class="col-md-12">
						<div class="col-md-8">
							<!--<input type="text" value="任务发布者" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = '任务发布者';}" required="" id="publisher" name="">-->
							<input type="text" value="任务名称" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = '任务名称';}" required="" id="name" name="name" placeholder="任务名称" style="margin-top:10px;">
							<input type="text" value="任务价格" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = '任务价格';}" required="" id="reward" name="reward" placeholder="任务价格" style="margin-top:10px;">
							<div class="col-md-12" style="margin-top:10px;height:40px;line-height:40px;border:1px solid #e5e5e5;background-color: #f5f5f5">
								<span style="float:left;font-size:14px">任务分类：</span>
								<div style="float:left;">
									<select   id="type" name="type" >
									<option th:each="c : ${category}" th:value="${c.categoryType}" th:text="${c.categoryName}"  >跑腿代取</option>
									</select>
								</div>

							</div>

							<!--<div class="col-md-12" style="border:1px solid gainsboro;margin-top:10px;float:left;background-color: #f5f5f5;" >-->
							<!--<input type="text" value="任务分类" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = '任务分类';}" required=""  id="classID"  name="type" placeholder="任务分类"  style="width:80%;border:none;float:left;background-color: #f5f5f5;" >-->

							<!--</div>-->

							<!--<input type="text" value="任务小图" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = '任务小图';}" required="" id="icon" name="icon">-->
							<input type="text" value="配送地点" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = '任务地点';}" required="" id="position" name="position" placeholder="配送地点 "  style="margin-top:10px;">
							<input type="text" value="联系电话" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = '联系电话';}" required="" id="phone" name="phone" placeholder="联系电话"  style="margin-top:10px;">
							<textarea type="text"  onfocus="this.value = '任务描述';" onblur="if (this.value == '') {this.value = '任务描述';}" required="" id="description" name="description">任务描述：</textarea>
							<div id="box-01" >
								<input  type="submit" id="submit1"  value="提交任务"  />
							</div>
						</div>

						<div class="col-md-4">
							<div class="mail-grid-right1" >
								<img id="pic" src="../images/product.jpg" style="width:100%;height:300px; " >
								<input id="upload" name="file" accept="image/*" type="file" style="display: none"/>
								<h4>点击上传任务图片 <span></span></h4>
								<ul class="phone-mail">
									<li><i class="glyphicon glyphicon-earphone" aria-hidden="true"></i>Phone: +18345336952 </li>
									<!--<li><i class="glyphicon glyphicon-envelope" aria-hidden="true"></i>Email: <a href="mailto:info@example.com">info@example.com</a></li>-->
								</ul>
								<ul class="social-icons">
								</ul>
							</div>


						</div>


					</form>


				</div>

				<div class="col-md-4 mail-grid-right animated wow slideInRight" data-wow-delay=".5s">

				</div>
				<div class="clearfix"> </div>
			</div>

		</div>
	</div>
<!-- //mail -->
<!-- footer -->
<a name="tips"></a>
<div class="footer">
	<div class="container">
		<div class="footer-grids">
			<div class="col-md-11 footer-grid animated wow slideInLeft" data-wow-delay=".5s" style="text-align: center">
				<h3>About Us</h3>
				<p>黑龙江科技大学，坐落在北国冰城哈尔滨市，是黑龙江“十二五”期间重点建设的特色应用型本科高校，黑龙江、吉林乃至内蒙古地区唯一一所以矿业工程为特色的高校，黑龙江省人民政府和国家安全生产监督管理总局共建高校  。因坐落于松花江北岸，故有“江畔朝阳”一说。</span></p>
			</div>

			<div class="clearfix"> </div>
		</div>
		<div class="footer-logo animated wow " >
			<h2><a href="../index">Bounty Hunter <span>shop anywhere</span></a></h2>
		</div>
	</div>
</div>
<!-- //footer -->

<script type="text/javascript">
    (function () {
        $("#submit").click(function(e){
            e.preventDefault();
            $.ajax({
                type:'get',
                url:"../assignment/issue",
                dataType: "json",
                data:{
                    name: $('#name').val(),
                    reward : $('#reward').val(),
					type:$('#type').val(),
                    position: $('#position').val(),
                    description : $('#description').val(),
					phone:$('#phone').val(),
//                    icon: $('#icon').val(),
					file: $('#file').val()
                },

                success:function(data){
                   if(data.code!="0"){
                       console.log(data);
                       alert(data.msg);
				   }
                },
                error:function(){
//                    $("#test").html("发生错误:"+jqXHR.status);
                	alert("发生错误！");
                }
            });
        })
    })()

    $(function() {
        $("#pic").click(function () {
            $("#upload").click(); //隐藏了input:file样式后，点击头像就可以本地上传
            $("#upload").on("change",function(){
                var objUrl = getObjectURL(this.files[0]) ; //获取图片的路径，该路径不是图片在本地的路径
                if (objUrl) {
                    $("#pic").attr("src", objUrl) ; //将图片路径存入src中，显示出图片
                }
            });
        });
    });

    function getObjectURL(file) {
        var url = null ;
        if (window.createObjectURL!=undefined) { // basic
            url = window.createObjectURL(file) ;
        } else if (window.URL!=undefined) { // mozilla(firefox)
            url = window.URL.createObjectURL(file) ;
        } else if (window.webkitURL!=undefined) { // webkit or chrome
            url = window.webkitURL.createObjectURL(file) ;
        }
        return url ;
    }


    function onChangeSelect(){
        document.getElementById("classID").value=document.getElementById("selectKK").value;
    };

    $('#submit1').click(function (e) {
        e.preventDefault();
        //这里唯一需要注意的就是这个form-add的id
        var formData = new FormData($("#form-add")[0]);
        console.log(formData);
        $.ajax({
            //接口地址
            url: '../assignment/issue' ,
            type: 'post',
            data: formData,
            cache: false,
            contentType: false,
            processData: false,
            success: function (data) {
                //成功的回调
                if (data.code==0){
                    alert("成功");
                }else {
                    alert(data.msg);
                }

            },
            error: function () {
                //请求异常的回调
                // modals.warn("网络访问失败，请稍后重试!");
				alert("错误");
            }
        });
    });


</script>
<script type="text/javascript">

    function fileUpload(){

        var formData = new FormData();
        formData.append('file', $('#file')[0].files[0]);
        $.ajax({
            url: '../assignment/fileUpload',
            type: 'POST',
            cache: false,
            data: formData,
            processData: false,
            contentType: false
        }).done(function(res) {
        }).fail(function(res) {});
    }

</script>

</body>
</html>